# generated by makefile_builder.pl using [cur_dir -t all dir domake -t rootfs dir msg domake -t install dir msg domake -t clean dir domake]

# search file from current folder to parent folders
# cutoff at 14th parent folder
search_cutoff := ../../../../../../../../../../../../../../
define search-file
	$(if $(filter $(search_cutoff)%,$1),,$(if $(wildcard $1),$1,$(call search-file,../$1)))
endef

include $(call search-file,lib.mk)

current_dir := $(shell pwd)
targets :=

targets += all
all_dirs := $(subst /,,$(shell ls -d */ 2> /dev/null))
all:
	$(call do_make_for_each,,all,$(all_dirs))

targets += install
install_dirs := $(subst /,,$(shell ls -d */ 2> /dev/null))
install:
	$(call color_print,Installing objects in $(current_dir),green)
	$(call do_make_for_each,,install,$(install_dirs))

targets += rootfs
rootfs_dirs := $(subst /,,$(shell ls -d */ 2> /dev/null))
rootfs:
	$(call color_print,Constructing rootfs folders in $(current_dir),green)
	$(call do_make_for_each,,rootfs,$(rootfs_dirs))

targets += clean
clean_dirs := $(subst /,,$(shell ls -d */ 2> /dev/null))
clean:
	$(call do_make_for_each,,clean,$(clean_dirs))

.PHONY: $(targets)
